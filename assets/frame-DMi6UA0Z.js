import{S as Z,i as $,s as x,C as k,k as B,R as E,f as H,v as ae,T as le,U as ce,e as se,b as ue,d as me,h as G,t as j,p as b,q as M,H as ee,A as z,B as J,D as de,E as K,F as te,G as L,I as U,J as V,K as W}from"./index-OMTxPB5B.js";import{dasMap as _e}from"../das_import_map.js";import{componentMap as he}from"../component_import_map.js";import pe from"../../garden.config.js";import"../gardenframe/cssimport.js";function Q(a){let e,n;return{c(){e=new le(!1),n=k(),this.h()},l(r){e=ce(r,!1),n=k(),this.h()},h(){e.a=n},m(r,i){e.m(a[0],r,i),B(r,n,i)},p(r,i){i&1&&e.p(r[0])},d(r){r&&(H(n),e.d())}}}function ge(a){let e,n=a[0]&&Q(a);return{c(){n&&n.c(),e=k()},l(r){n&&n.l(r),e=k()},m(r,i){n&&n.m(r,i),B(r,e,i)},p(r,[i]){r[0]?n?n.p(r,i):(n=Q(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:E,o:E,d(r){r&&H(e),n&&n.d(r)}}}function we(a,e,n){let{component:r}=e,{afterRenderHook:i=()=>{}}=e;return ae(async()=>{await i()}),a.$$set=l=>{"component"in l&&n(0,r=l.component),"afterRenderHook"in l&&n(1,i=l.afterRenderHook)},[r,i]}class X extends Z{constructor(e){super(),$(this,e,we,ge,x,{component:0,afterRenderHook:1})}}async function ke(a){try{let e=new X({target:document.getElementById("garden_app"),props:{afterRenderHook:a}});return{destroy:()=>{var n;return(n=e==null?void 0:e.$destroy)==null?void 0:n.call(e)},updateComponent:n=>{var r;(r=e==null?void 0:e.$destroy)==null||r.call(e),e=new X({target:document.getElementById("garden_app"),props:{...n,afterRenderHook:a}})}}}catch(e){console.log("error",e)}}const S={create:ke};function Y(a){var t;let e,n,r;const i=[(t=a[2])==null?void 0:t.input];var l=a[4];function u(o,d){var p;let _={};for(let h=0;h<i.length;h+=1)_=W(_,i[h]);return d!==void 0&&d&4&&(_=W(_,U(i,[V((p=o[2])==null?void 0:p.input)]))),{props:_}}return l&&(e=z(l,u(a)),e.$on("out",a[5])),{c(){e&&J(e.$$.fragment),n=k()},l(o){e&&de(e.$$.fragment,o),n=k()},m(o,d){e&&K(e,o,d),B(o,n,d),r=!0},p(o,d){var _;if(d&16&&l!==(l=o[4])){if(e){te();const p=e;M(p.$$.fragment,1,0,()=>{L(p,1)}),ee()}l?(e=z(l,u(o,d)),e.$on("out",o[5]),J(e.$$.fragment),b(e.$$.fragment,1),K(e,n.parentNode,n)):e=null}else if(l){const p=d&4?U(i,[V((_=o[2])==null?void 0:_.input)]):{};e.$set(p)}},i(o){r||(e&&b(e.$$.fragment,o),r=!0)},o(o){e&&M(e.$$.fragment,o),r=!1},d(o){o&&H(n),e&&L(e,o)}}}function ye(a){var l;let e,n=a[0].devmodus&&a[4]&&(((l=a[1])==null?void 0:l.file)??"").indexOf(".svelte")>0,r,i=n&&Y(a);return{c(){e=se("div"),i&&i.c(),this.h()},l(u){e=ue(u,"DIV",{id:!0,class:!0});var t=me(e);i&&i.l(t),t.forEach(H),this.h()},h(){G(e,"id","garden_app"),G(e,"class","svelte-16w9tv2"),j(e,"full",a[3])},m(u,t){B(u,e,t),i&&i.m(e,null),r=!0},p(u,[t]){var o;t&19&&(n=u[0].devmodus&&u[4]&&(((o=u[1])==null?void 0:o.file)??"").indexOf(".svelte")>0),n?i?(i.p(u,t),t&19&&b(i,1)):(i=Y(u),i.c(),b(i,1),i.m(e,null)):i&&(te(),M(i,1,1,()=>{i=null}),ee()),(!r||t&8)&&j(e,"full",u[3])},i(u){r||(b(i),r=!0)},o(u){M(i),r=!1},d(u){u&&H(e),i&&i.d()}}}function be(a){return new Promise((e,n)=>{setTimeout(()=>n(new Error("Timeout on")),a)})}function He(a,e,n){let{componentMap:r={}}=e,{dasMap:i={}}=e,{config:l}=e,u=l.hookTimeout|5e3,t={},o={},d,_=!1,p,h,F,T,v={},O,P,A=[],R=[],C=[],y=[],N=[];window.addEventListener("message",f=>{var s;if(l.themeHandler&&l.themeHandler(f.data.theme),n(3,_=f.data.stageSize==="full"),n(1,t=i[f.data.componentName]),n(2,o=((s=t==null?void 0:t.examples)==null?void 0:s.find(m=>m.title===f.data.selectedExample))??{}),O=F!==f.data.componentName,F=f.data.componentName||"Welcome",P=d!==f.data.selectedExample,d=f.data.selectedExample,n(4,T=r==null?void 0:r[F]),l.devmodus){v={};return}else oe(T,o,t)});async function ne(f){if(!f)return S;for(const s in l.renderer)if(new RegExp(s+"$").test(f))return l.renderer[s];return S}async function oe(f,s,m){if(l.renderer){const w=await ne(m==null?void 0:m.file);w!==p&&await q(w)}await ie();try{h==null||h.updateComponent({component:f,selectedExample:s,das:m,decorators:m==null?void 0:m.decorators,afterRenderHook:re})}catch(w){console.error(w)}}async function re(){await I(N)}let g=[];async function ie(){if(O){N=[o==null?void 0:o.play],y=t!=null&&t.beforeAll?[t==null?void 0:t.beforeAll]:[];const f=t!=null&&t.hooks?g.filter(c=>!(t!=null&&t.hooks.find(D=>D===c))):g,s=g.length>0?t==null?void 0:t.hooks.filter(c=>!g.find(D=>c===D)):(t==null?void 0:t.hooks)??[];g=(t==null?void 0:t.hooks)??[];const m=g.filter(c=>c.before).map(c=>c.before)??[];R=[...R,...f.filter(c=>c.afterAll).map(c=>c.afterAll)],y=[...s.filter(c=>c.beforeAll).map(c=>c.beforeAll),...y],C=[...m,t==null?void 0:t.before,o==null?void 0:o.before].filter(c=>!!c),await I([...A,...R,...y,...C]);const w=g.filter(c=>c.after).map(c=>c.after)??[];R=t!=null&&t.afterAll?[t==null?void 0:t.afterAll]:[],A=[o==null?void 0:o.after,t==null?void 0:t.after,...w].filter(c=>!!c),y=[]}else P&&(N=[o==null?void 0:o.play],C=[t==null?void 0:t.before,o==null?void 0:o.before],await I([...A,...C]),A=[o==null?void 0:o.after,t==null?void 0:t.after])}async function q(f){try{await(h==null?void 0:h.destroy())}catch(s){console.error("Could not destroy current renderer",s)}h=await f.create()}function fe(f){t.out&&t.out.forEach(s=>{if(f.detail[s.name]&&(console.log(f.detail[s.name]),o.redirect&&o.redirect[s.name])){const m=o.redirect[s.name];v[m]=f.detail[s.name]}})}async function I(f){for(const s of f)if(s)try{await Promise.race([be(u),s()])}catch(m){console.error(m)}}return a.$$set=f=>{"componentMap"in f&&n(6,r=f.componentMap),"dasMap"in f&&n(7,i=f.dasMap),"config"in f&&n(0,l=f.config)},a.$$.update=()=>{a.$$.dirty&1&&(l.devmodus||q(S))},[l,t,o,_,T,fe,r,i]}class Ae extends Z{constructor(e){super(),$(this,e,He,ye,x,{componentMap:6,dasMap:7,config:0})}}new Ae({target:document.body,props:{componentMap:he,dasMap:_e,config:pe}});
